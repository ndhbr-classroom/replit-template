import os
from node_modules.set_git_config import set_git_config
from replit import db

print("Copy and paste the following SSH-Key to your GitHub-Account (https://github.com/settings/ssh/new#):")

try:
    f = open("../.ssh/id_rsa.pub", "r")
    print("%s\n" % f.read())
except OSError:
    print("--- KEY NOT FOUND, TRY TO RERUN THE APP ---")

git_config_name = db["git_config_name"] if "git_config_name" in db else ""
git_config_mail = db["git_config_mail"] if "git_config_mail" in db else ""

if not git_config_name or not git_config_mail:
    print("\nPlease configure your credentials in order to use GitHub correctly:")
    name = input("Enter your name: ")
    mail = input("Enter your email: ")
    if not name or not mail:
        print("\nWrong input, please try again")
        exit(1)
    db["git_config_name"] = name
    db["git_config_mail"] = mail

    output, error = set_git_config(name, mail)

    if not error:
        print("\nGitHub Setup completed")
